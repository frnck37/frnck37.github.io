<!DOCTYPE html>
<html lang="fr">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Astronautes en Vol</title>

        <link rel="stylesheet" href="./w3.css" type="text/css">
        <script src="./jquery.min.js"></script>
        <script src="./ztext.js"></script>
        <link rel="stylesheet" href="jquery.vidbacking.css" type="text/css">
        <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css">
        <style>
            :root {
                --glow-color: #00fff2;
                --dark-glow: #007772;
                --background-dark: #020b26;
            }

            body {
                background: var(--background-dark);
                color: #fff;
                font-family: 'Orbitron', sans-serif;
                overflow-x: hidden;
            }

            .container {
                max-width: 1200px;
                margin: auto;
                padding: 20px;
            }

            h2.w3-tag {
                background: linear-gradient(90deg, #000428, #004e92);
                color: white;
                text-shadow: var(--text-glow);
                padding: 10px 20px;
                border-radius: 25px;
                letter-spacing: 2px;
                font-family: 'Orbitron', sans-serif;
                animation: glowPulse 2s infinite;
            }

            .name {
                background: linear-gradient(90deg, #000428, #004e92);
                color: white;
                text-shadow: var(--text-glow);
                text-align: justify center;
                padding: 10px 20px;
                border-radius: 25px;
                font-size: medium;
                font-family: 'Orbitron', sans-serif;
                animation: glowPulse 2s infinite;
            }

            .glow-text {
                color: var(--glow-color);
                text-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color);
                text-align: center;
                font-size: 2rem;
                font-family: 'Orbitron', sans-serif;
                animation: glowPulse 2s infinite alternate;
            }

            .glow-tile {
                color: var(--glow-color);
                text-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color);
                text-align: center;
                font-size: 2rem;
                font-family: 'Orbitron', sans-serif;
                animation: glowPulse 2s infinite alternate;
            }

            .bio-text {
                text-align: justify;
                font-size: 1.2rem;
                font-family: Georgia, 'Times New Roman', Times, serif;
            }

            @keyframes glowPulse {
                from {
                    text-shadow: 0 0 10px var(--glow-color);
                }

                to {
                    text-shadow: 0 0 20px var(--glow-color);
                }
            }

            .astronaut-card {
                background: rgba(0, 15, 45, 0.8);
                border: 1px solid var(--glow-color);
                box-shadow: 0 0 15px var(--dark-glow);
                padding: 20px;
                border-radius: 15px;
                margin: 20px 0;
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }

            .astronaut-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 0 30px var(--glow-color);
            }

         .astronaut-image {
    width: 100%;
    max-width: 250px; /* Adjust as needed */
    height: auto;
    border-radius: 2%;
    border: 2px solid var(--glow-color);
    box-shadow: 0 0 20px var(--glow-color);
    position: relative;
    transition: transform 0.5s ease;
}

            .astronaut-image::after {
                content: "";
                position: absolute;
                top: -2px;
                left: -2px;
                right: -2px;
                bottom: -2px;
                border-radius: 2%;
                border: 2px solid transparent;
                box-shadow: 0 0 10px var(--glow-color);
                animation: border-glow 3s infinite linear;
            }

            @keyframes border-glow {
                0% {
                    clip-path: inset(0 100% 98% 0);
                }

                25% {
                    clip-path: inset(0 0 0 98%);
                }

                50% {
                    clip-path: inset(98% 0 0 0);
                }

                75% {
                    clip-path: inset(0 98% 0 0);
                }

                100% {
                    clip-path: inset(0 100% 98% 0);
                }
            }

            .logo-image {
                width: 100px;
                height: 100px;
                border-radius: 5%;
                padding: auto;
                border: 2px solid var(--glow-color);
                box-shadow: 0 0 20px var(--glow-color);
                transition: transform 0.5s ease;
            }

            .astronaut-image:hover {
                transform: scale(1.3);
            }

            .right-align {
                text-align: right;
            }

            .z-text {

                animation: wobble 10s ease-in-out infinite;
                transform: rotateX(15deg) rotateY(-20deg);
            }

            .z-layer {
                filter: brightness(0.7);
            }

            .z-layer:first-child {
                filter: brightness(1);
            }


            .z-layer:not(:first-child) {
                filter: brightness(0.7);
            }

            @keyframes wobble {

                0%,
                100% {
                    transform: rotate3d(-1, 1, 0, 30deg);
                }

                25% {
                    transform: rotate3d(1, 1, 0, 30deg);
                }

                50% {
                    transform: rotate3d(1, -1, 0, 30deg);
                }

                75% {
                    transform: rotate3d(-1, -1, 0, 30deg);
                }
            }

            .test {
                font-family: 'Orbitron', sans-serif;
                font-size: x-large;
            }

            .w3-badge {
                background: linear-gradient(45deg, #8a73e7, #60efff);
                border: none;
                padding: 8px;
                font-size: 1.2em;
                box-shadow: 0 0 15px rgba(0, 255, 242, 0.4);
                font-family: 'Orbitron', sans-serif;
            }

            button[onclick^="toggleAccordion"] {
                background: transparent;
                border: 1px solid var(--glow-color);
                color: var(--glow-color);
                padding: 5px 15px;
                border-radius: 20px;
                transition: all 0.3s ease;
                animation: buttonGlow 1.5s infinite alternate;
            }

            button[onclick^="toggleAccordion"]:hover {
                background: rgba(0, 255, 242, 0.1);
                transform: scale(1.05);
            }


            /* Smooth scroll behavior */
            html {
                scroll-behavior: smooth;
            }

            /* Enhanced accordion animation */
            .w3-show {
                animation: slideDown 0.5s ease-out;
            }

            @keyframes slideDown {
                from {
                    opacity: 0;
                    transform: translateY(-10px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* Navigation menu enhancement */
            #w3-menu-container {
                position: fixed;
                top: 0;
                width: 100%;
                z-index: 1000;
                background:transparent;
                backdrop-filter: blur(2px);
                box-shadow: 0 0 10px rgba(0, 255, 242, 0.2);
            }

            #w3-menu-container img {
                transition: transform 0.3s ease;
                filter: drop-shadow(0 0 5px var(--glow-color));
            }

            #w3-menu-container img:hover {
                transform: scale(1.2);
                filter: drop-shadow(0 0 10px var(--glow-color));
            }
        </style>
    </head>

    <body>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
        <script src="jquery.vidbacking.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(function () {
                $('body').vidbacking({
                    'masked': false
                });
            });
        </script>
        <video poster="starryNight2.jpeg" autoplay muted loop class="vidbacking">
            <source src="spacevid.mp4" type="video/mp4">
            <source src="spacevid.webm" type="video/webm">
        </video>
        <!-- Navigation (Stays on Top) -->
        <div id="w3-menu-container" class="w3-bar w3-center w3-transparent">
            <!-- Your W3.CSS sidenav goes here -->

            <a href="index.html" class="w3-button"><img src="iss4.png" height="50px" width="40px"></img></a>
            <a href="space-astro.html" class="w3-button"><img src="cosmo.png" height="50px"
                    width="40px"></img></span></a>
            <a href="lancements.html" class="w3-button"><img src="fusÃ©e.png" height="50px" width="40px"></img></a>
            <a href="exo-arecibo.html" class="w3-button"><img src="saturne.png" height="50px" width="40px"></img></a>
            <a href="apod.html" class="w3-button"><img src="telescope.png" height="50px" width="40px"></img></a>

        </div>


        <div class="gtranslate_wrapper"></div>
        <script>
            window.gtranslateSettings = {
                "default_language": "fr",
                "native_language_names": true,
                "wrapper_selector": ".gtranslate_wrapper",
                "flag_size": 16,
                "switcher_horizontal_position": "left",
                "switcher_vertical_position": "bottom",
                "flag_style": "3d"
            }
        </script>
        <script src="https://cdn.gtranslate.net/widgets/latest/dwf.js" defer></script>



        <div id="main">
            <br>
            <div class="container">
                <h1 class="glow-text">Astronautes en Vol</h1>
                <div id="astronautsData">Loading...</div>
            </div>

            <script>
               async function fetchData() {
    const apiUrl = "https://corsproxy.io/?https://ll.thespacedevs.com/2.2.0/astronaut/?in_space=true&type__id=&nationality=&date_of_birth=&date_of_birth__lt=&date_of_birth__lte=&date_of_birth__gt=&date_of_birth__gte=&profile_image=&profile_image__isnull=&bio=&bio__isnull=";
    try {
        const response = await fetch(apiUrl);
        const data = await response.json();
        const container = document.getElementById("astronautsData");

        let count = data.count;
        container.innerHTML = "";

        data.results.forEach(astronaut => {
            const card = document.createElement("div");
            card.classList.add("astronaut-card");

            // Format the first flight date
            const firstFlightDate = new Date(astronaut.first_flight);
            const formattedFirstFlight = firstFlightDate.toLocaleDateString('fr-FR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

            // Debugging: Log the time_in_space value
            console.log(`Astronaut: ${astronaut.name}, Time in Space: ${astronaut.time_in_space}`);

           
            // Parse and format time in space
            const timeInSpace = astronaut.time_in_space.match(/P(?:(\d+)D)?T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);
            const days = timeInSpace[1] ? parseInt(timeInSpace[1]) : 0;
            const hours = timeInSpace[2] ? parseInt(timeInSpace[2]) : 0;
            const minutes = timeInSpace[3] ? parseInt(timeInSpace[3]) : 0;
            const seconds = timeInSpace[4] ? parseInt(timeInSpace[4]) : 0;
            const formattedTimeInSpace = `${days} jours ${hours} heures ${minutes} minutes ${seconds} secondes`;

            card.innerHTML = `
                <p class="name">
                    <a class="w3-badge w3-right-align glow-text"><strong>${count--}</strong></a>
                    <a class="test"> -  ${astronaut.name}</a><br>
                    <img class="astronaut-image" src="${astronaut.profile_image || 'cosmo.png'}" alt="${astronaut.name}"></p>
                <p><a class="w3-tag w3-blue w3-round-large"><strong><u>NationalitÃ©:</u></strong></a> ${astronaut.nationality}</p>
                <p><a class="w3-tag w3-blue w3-round-large"><strong><u>Age:</u></strong></a> ${astronaut.age} years</p>
                <p><a class="w3-tag w3-blue w3-round-large"><strong><u>Agence:</u></strong></a> ${astronaut.agency.name}</p>
                <p><a class="w3-tag w3-blue w3-round-large"><strong><u>Vaisseau:</u></strong></a> ${astronaut.agency.spacecraft}</p>
                <button onclick="toggleAccordion('Demo${count}')" class="w3-container w3-ripple w3-hover w3-border-deep-orange w3-pale-blue w3-text-green w3-tiny w3-round-xxlarge"><p>>Infos>></p></button>
                <div id="Demo${count}" class="w3-container w3-hide">
                    <p class="w3-display-container w3-tag w3-animate-right"><strong><i><u>Bio: </u></i></strong><a class="bio-text"> ${astronaut.bio}</a></p>
                    <p><strong><a class="w3-tag w3-pale-blue w3-round-large">Nombres de vols: </a></strong> ${astronaut.flights_count}</p>
                    <p><strong><a class="w3-tag w3-pale-blue w3-round-large">Spacewalks: </a></strong> ${astronaut.spacewalks_count}</p>
                    <p><strong><a class="w3-tag w3-pale-blue w3-round-large">1er vol: </a></strong> ${formattedFirstFlight}</p>
                    <p><strong><a class="w3-tag w3-pale-blue w3-round-large">Temps total dans l'espace: </a></strong> ${formattedTimeInSpace}</p>
                    <p><strong><a class="w3-tag w3-pale-blue w3-round-large">Wiki: </a></strong> <a href="${astronaut.wiki}" target="_blank">${astronaut.wiki}</a></p>
                    <p><strong><a class="w3-tag w3-pale-blue w3-round-large">Twitter: </a></strong> <a href="${astronaut.twitter}" target="_blank">${astronaut.twitter}</a></p>
                    <p><strong><a class="w3-tag w3-pale-blue w3-round-large">Instagram: </a></strong> <a href="${astronaut.Instagram}" target="_blank">${astronaut.Instagram}</a></p>
                    <p><strong><a class="w3-tag w3-pale-blue w3-round-large">Agence: </a></strong> ${astronaut.agency.name} - (<i>${astronaut.agency.abbrev}</i>) - <strong><u><i>Type:</i></u></strong> ${astronaut.agency.type}</p>
                    <p class="w3-right-align"><span data-z data-z-depth="40px" z-perspective="none" z-depth="60px"><img class="logo-image w3-center" src="${astronaut.agency.logo_url}"></span></p>
                </div>
            `;
            container.appendChild(card);
        });

        document.querySelectorAll('.ztext').forEach(element => {
            new Ztextify(element);
        });
    } catch (error) {
        console.error("Error fetching data:", error);
        document.getElementById("astronautsData").innerText = "Failed to fetch data.";
    }
}

function toggleAccordion(id) {
    const x = document.getElementById(id);
    if (x.classList.contains("w3-show")) {
        x.classList.remove("w3-show");
    } else {
        x.classList.add("w3-show");
    }
}

function ztextify() {
    const elements = document.querySelectorAll('.ztext');
    elements.forEach(element => {
        ztextify(element);
    });
}

fetchData();
            </script>
        </div>




    </body>

</html>
